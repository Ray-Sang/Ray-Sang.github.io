<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>OpenCVåŸºç¡€å†…å®¹ç¬”è®° | Ray&#39;s Space</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://ray-sang.github.io/favicon.ico?v=1635947554761">
<link rel="stylesheet" href="https://ray-sang.github.io/styles/main.css">



<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="ğŸ™

ç¯å¢ƒé…ç½®
å‚è€ƒï¼šhttps://blog.csdn.net/bankexinan/article/details/109730277?utm_medium=distribute.pc_relevant.none-task-blog-..." />
    <meta name="keywords" content="OpenCV" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://ray-sang.github.io">
        <img src="https://ray-sang.github.io/images/avatar.png?v=1635947554761" class="site-logo">
        <h1 class="site-title">Ray&#39;s Space</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            é¦–é¡µ
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            å½’æ¡£
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            æ ‡ç­¾
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            å…³äº
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      Plain living and high thinking
    </div>
    <div class="site-footer">
      Photography enthusiastic @<a href="https://500px.com.cn/sangray" target="_blank">500px</a> | <a class="rss" href="https://ray-sang.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">OpenCVåŸºç¡€å†…å®¹ç¬”è®°</h2>
            <div class="post-date">2021-09-05</div>
            
            <div class="post-content" v-pre>
              <p>ğŸ™</p>
<!-- more -->
<h1 id="ç¯å¢ƒé…ç½®">ç¯å¢ƒé…ç½®</h1>
<p>å‚è€ƒï¼šhttps://blog.csdn.net/bankexinan/article/details/109730277?utm_medium=distribute.pc_relevant.none-task-blog-2<sub>default</sub>baidujs_title~default-4.essearch_pc_relevant&amp;spm=1001.2101.3001.4242</p>
<p>å…¨é¢ï¼Œè¯¦ç»†ï¼Œé¿å…è¸©é›·çš„è¿‡ç¨‹ã€‚ä¸»è¦ä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li>ç¬¬ä¸€æ­¥ï¼šä¸‹è½½è§£å‹opencvå®‰è£…åŒ…ã€‚åˆ°å®˜ç½‘ä¸‹è½½æœ€æ–°Opencv, æ­¤å¤„ç”¨çš„æ˜¯4.5.0ç‰ˆæœ¬ã€‚åŒå‡»ä¸‹è½½å¥½çš„æˆ–è€…æ‹·å¥½çš„å®‰è£…åŒ…ï¼Œé€‰æ‹©è§£å‹è·¯å¾„åç‚¹Extractå³å¯å®Œæˆè§£å‹ï¼Œè§£å‹åä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªopencvçš„æ–‡ä»¶å¤¹ã€‚</li>
<li>ç¬¬äºŒæ­¥ï¼šé…ç½®ç¯å¢ƒå˜é‡ã€‚ç¼–è¾‘Pathï¼šâ€œxxä½ çš„å®‰è£…ç›®å½•xx\opencv\build\x64\vc15\binâ€</li>
<li>ç¬¬ä¸‰æ­¥ï¼šç›¸å…³æ–‡ä»¶çš„é…ç½®ã€‚ç½‘ä¸Šå¾ˆå¤šæ•™ç¨‹æ²¡æœ‰è¿™ä¸€æ­¥ï¼Œä¼šæŠ¥é‚£ç§æ‰¾ä¸åˆ°dllæ–‡ä»¶çš„é”™è¯¯ï¼Œæ˜¯å› ä¸ºæ²¡æœ‰å°†opencvé‡Œé¢çš„ç›¸å…³æ–‡ä»¶å¤åˆ¶åˆ°Cç›˜ä¸­çš„æ–‡ä»¶å¤¹é‡Œé¢ã€‚æ“ä½œæ–¹æ³•ï¼šå°†binç›®å½•ä¸‹é¢çš„opencv_world450.dllå’Œopencv_world450d.dllæ–‡ä»¶å¤åˆ¶åˆ°C:\Windows\SysWOW64è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œé¢ï¼›<br>
å°†binç›®å½•é‡Œé¢çš„opencv_videoio_ffmpeg450_64.dllå’Œopencv_world450d.dllæ–‡ä»¶å¤åˆ¶åˆ°C:\Windows\System32è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œé¢ï¼›<br>
ï¼ˆæ³¨ï¼šå¦‚æœæ˜¯opencvå…¶ä»–çš„ç‰ˆæœ¬ï¼ŒæŠŠå¯¹åº”çš„dllæ–‡ä»¶ç§»åŠ¨åˆ°ä¸Šè¿°ä¸¤ä¸ªCç›˜æ–‡ä»¶å¤¹å³å¯ï¼<br>
å¦‚æœæŠ¥é”™æ‰¾ä¸åˆ° opencv_xxxxxxx.libæ–‡ä»¶ï¼Œå°±è¯•è¯•çœ‹æŠŠç›¸å…³libæ–‡ä»¶å¤åˆ¶åˆ°C:\Windows\System32å’ŒC:\Windows\SysWOW64è¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹é‡Œé¢ï¼ï¼‰</li>
<li>æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œæˆ‘è¿™é‡Œå»ºäº†ä¸€ä¸ªç©ºé¡¹ç›®ã€‚è¿›å…¥å±æ€§ç®¡ç†å™¨ï¼Œèœå•æ -&gt;è§†å›¾-&gt;å…¶ä»–çª—å£-&gt;å±æ€§ç®¡ç†å™¨ã€‚å¯¹Debug|X64è¿›è¡Œé…ç½®ï¼Œå³é”®Microsoft.Cpp.x64.userï¼Œç‚¹å‡»å±æ€§ã€‚<br>
ï¼ˆæ³¨ï¼šVisual studio2019é…ç½®OPENCV æ—¶å±æ€§ç®¡ç†å™¨ä¸­æ²¡æœ‰Microsoft.Cpp.x64.userçš„è§£å†³åŠæ³•ï¼šæ‰¾åˆ°ç›®å½•â€œC:\Users\â€œä½ çš„ç”¨æˆ·åâ€\AppData\Local\Microsoftâ€ï¼Œï¼ˆä¸€èˆ¬æƒ…å†µä¸‹ä¸æ˜¾ç¤ºAppDataæ–‡ä»¶å¤¹ï¼Œéœ€è¦åœ¨æ–‡ä»¶å¤¹çš„æŸ¥çœ‹é€‰é¡¹ä¸­å‹¾é€‰â€œéšè—çš„é¡¹ç›®â€ä½¿å…¶å¯è§ï¼‰ã€‚åœ¨è¯¥ç›®å½•å¯å‘ç°ä»–äººç”µè„‘ä¸Šä¼šæœ‰â€œMSBuildâ€çš„æ–‡ä»¶å¤¹ï¼Œå°†å…¶æ‹·è´æ”¾å…¥è‡ªå·±çš„ç”µè„‘ç›¸åŒä½ç½®ã€‚é“¾æ¥ï¼šhttps://pan.baidu.com/s/1r4qOTi2CVe4j04OQGct_WQ æå–ç ï¼šVS19 ï¼‰ï¼‰<br>
è¿™é‡Œæˆ‘ä»¬å¯¹å±æ€§ä¸­çš„ VC++ç›®å½•-&gt;åŒ…å«ç›®å½•å’ŒVC++ç›®å½•-&gt;åº“ç›®å½•è¿›è¡Œæ·»åŠ ç›¸å…³è·¯å¾„ï¼Œå¯¹ é“¾æ¥å™¨-&gt;è¾“å…¥-&gt;é™„åŠ ä¾èµ–é¡¹è¿›è¡Œæ·»åŠ ç›¸å…³è·¯å¾„ã€‚åŒ…å«ç›®å½•ä¸­åŠ å…¥</li>
</ol>
<pre><code>D:\Program Files\opencv\build\include
D:\Program Files\opencv\build\include\opencv2
</code></pre>
<p>åº“ç›®å½•ä¸­åŠ å…¥<code>D:\Program Files\opencv\build\x64\vc15\lib</code>ã€‚<br>
é“¾æ¥å™¨-&gt;è¾“å…¥-&gt;é™„åŠ ä¾èµ–é¡¹ä¸­åŠ å…¥<code>opencv_world450d.lib</code>ã€‚</p>
<h1 id="åˆçº§å†…å®¹">åˆçº§å†…å®¹</h1>
<h2 id="åŸºæœ¬è¾“å…¥è¾“å‡º-imread-and-imshow">åŸºæœ¬è¾“å…¥è¾“å‡ºï¼š imread() and imshow()</h2>
<p>ä¸‹é¢è¿™æ®µä»£ç å®Œæˆäº†ä¸€å¼ å›¾ç‰‡çš„è¯»å…¥ä»¥åŠçª—å£æ˜¾ç¤ºã€‚</p>
<pre><code class="language-c++">#include&lt;opencv2/opencv.hpp&gt;
#include&lt;iostream&gt;

using namespace cv;
using namespace std;

int main(int artc, char** argv) {
	Mat src = imread(&quot;D:/sjtu/sjtu_files/4_1/opencv_learn/lena.jpg&quot;); // the simplest way to load an image to Mat
	// Mat src = imread(&quot;D:/sjtu/sjtu_files/4_1/opencv_learn/lena.jpg&quot;, IMREAD_GRAYSCALE);

	if (src.empty()) {
		printf(&quot;Could not load image...\n&quot;);
		return -1;
	}
	
	cout &lt;&lt; src.depth() &lt;&lt; endl; // output 0, may be a enum value
	
	namedWindow(&quot;Input window&quot;, WINDOW_FREERATIO);
	imshow(&quot;Input window&quot;, src);

	waitKey(0); // ms unit, 0 means wait
	return 0;
}
</code></pre>
<p>ä»£ç è¯´æ˜ï¼š</p>
<ul>
<li>è¯»å…¥å›¾ç‰‡çš„å‡½æ•°<code>imread()</code>æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªä¸ºæ–‡ä»¶è·¯å¾„ï¼Œç¬¬äºŒä¸ªä¸ºè¯»å…¥çš„å±æ€§ã€‚å¸¸è§çš„è¯»å–å±æ€§æœ‰ï¼š<code>IMREAD_GRAYSCALE</code>è¯»å…¥ç°åº¦å›¾ï¼›<code>IMREAD_UNCHANGED</code>è¯»å–pngæ ¼å¼ï¼Œè¯»å…¥alpha channelï¼Œä¸”è¾“å…¥å…·æœ‰ç›¸åº”çš„æ·±åº¦æ—¶ï¼Œè¿”å›16ä½/32ä½å›¾åƒï¼Œå¦åˆ™å°†è½¬æ¢ä¸º8ä½ï¼›<code>IMREAD_ANYCOLOR</code>åŠ è½½å¯èƒ½çš„æµ®ç‚¹æ•°æ®ï¼Œå¦‚RGBä¹‹å¤–çš„å…¶ä»–è‰²å½©ç©ºé—´å›¾ç‰‡......</li>
<li>é€šè¿‡<code>src.empty()</code>æ–¹æ³•ï¼Œè·å¾—æ˜¯å¦è¯»å–æˆåŠŸï¼›é€šè¿‡<code>src.depth()</code>ï¼Œè·å¾—å›¾åƒä½æ·±åº¦ã€‚</li>
<li>åˆ›å»ºå¯ä»¥è‡ªå®šä¹‰å¤§å°çš„çª—å£ï¼š<code>named_Window(const String&amp; &lt;windowName&gt;, int flag &lt;properties of the window&gt;)</code>ã€‚åœ¨<code>imshow()</code>æ—¶ï¼Œæ³¨æ„<code>windowName</code>å‚æ•°å’Œä¹‹å‰åˆ›å»ºçš„çª—å£ä¿æŒä¸€è‡´ï¼Œæ‰èƒ½å°†å›¾åƒæ˜¾ç¤ºåœ¨ä¹‹å‰åˆ›å»ºçš„çª—å£ä¸­ã€‚å¦‚æœç›´æ¥ä½¿ç”¨<code>imshow()</code>ï¼Œé‚£ä¹ˆé»˜è®¤ä¸º<code>WINDOW_AUTOSIZE</code>ï¼Œå½“å›¾åƒåˆ†è¾¨ç‡è¾ƒå¤§æ—¶ï¼Œçª—å£å¯èƒ½åªèƒ½æ˜¾ç¤ºå›¾åƒçš„å±€éƒ¨ã€‚</li>
<li><code>waitkey(int &lt;waitTimeInMs&gt;)</code>ï¼Œ0è¡¨ç¤ºé˜»å¡ç­‰å¾…ã€‚</li>
<li>è¦ä¿å­˜å›¾åƒï¼Œä½¿ç”¨<code>imwrite(const String&amp; &lt;path.name.format&gt;, Mat &lt;src&gt;)</code>ã€‚</li>
</ul>
<h2 id="å›¾åƒè‰²å½©ç©ºé—´è½¬æ¢cvtcolor-imwrite">å›¾åƒè‰²å½©ç©ºé—´è½¬æ¢ï¼šcvtColor, imwrite</h2>
<h3 id="çŸ¥è¯†ç‚¹">çŸ¥è¯†ç‚¹ï¼š</h3>
<ul>
<li>è‰²å½©ç©ºé—´è½¬æ¢å‡½æ•°ï¼š<code>cvtColor()</code>
<ul>
<li><code>COLOR_BGR2GRAY = 6</code> å½©è‰²åˆ°ç°åº¦</li>
<li><code>COLOR_GRAY2BGR = 8</code> ç°åº¦åˆ°å½©è‰²</li>
<li><code>COLOR_BGR2HSV = 40</code> BGRåˆ°HSV</li>
<li><code>COLOR_HSV2BGR = 54</code> HSVåˆ°BGR</li>
</ul>
</li>
<li>å›¾åƒä¿å­˜ï¼š<code>imwrite(const String&amp; &lt;path&gt;, Mat? &lt;src&gt;)</code></li>
</ul>
<h3 id="ç¤ºä¾‹ä»£ç ">ç¤ºä¾‹ä»£ç </h3>
<p>quickopencv.h:</p>
<pre><code class="language-c++">#pragma once
#include&lt;opencv2/opencv.hpp&gt;
using namespace cv;

class QuickDemo {
public:
	void colorSpace_Demo(Mat&amp; image);
};
</code></pre>
<p>quickdemo.cpp:</p>
<pre><code class="language-c++">#include&quot;quickopencv.h&quot;

void QuickDemo::colorSpace_Demo(Mat&amp; image) {
	Mat gray, hsv;
	cvtColor(image, hsv, COLOR_BGR2HSV);
	// H 0~180, S/V both 0~255
	cvtColor(image, gray, COLOR_BGR2GRAY);
	imshow(&quot;HSV&quot;, hsv);
	imshow(&quot;gray&quot;, gray);
	imwrite(&quot;D:/sjtu/sjtu_files/4_1/opencv_learn/2_cvtColor/hsv.png&quot;, hsv);
	imwrite(&quot;D:/sjtu/sjtu_files/4_1/opencv_learn/2_cvtColor/gray.png&quot;, gray);
}
</code></pre>
<p>main.cpp:</p>
<pre><code class="language-c++">#include&lt;opencv2/opencv.hpp&gt;
#include&lt;iostream&gt;
#include&quot;quickopencv.h&quot;
using namespace cv;
using namespace std;

int main(int artc, char** argv) {
	Mat src = imread(&quot;D:/sjtu/sjtu_files/4_1/opencv_learn/lena.jpg&quot;); // the simplest way to load an image to Mat
	// Mat src = imread(&quot;D:/sjtu/sjtu_files/4_1/opencv_learn/lena.jpg&quot;, IMREAD_GRAYSCALE);

	if (src.empty()) {
		printf(&quot;Could not load image...\n&quot;);
		return -1;
	}
	
	cout &lt;&lt; src.depth() &lt;&lt; endl; // output 0, may be a enum value
	
	namedWindow(&quot;Input window&quot;, WINDOW_FREERATIO);
	imshow(&quot;Input window&quot;, src);
	
	QuickDemo qd;
	qd.colorSpace_Demo(src);
	
	waitKey(0); // ms unit, 0 means wait
	return 0;
}
</code></pre>
<h2 id="opencvä¸­å›¾åƒå¯¹è±¡åˆ›å»ºä¸èµ‹å€¼mat">OpenCVä¸­å›¾åƒå¯¹è±¡åˆ›å»ºä¸èµ‹å€¼â€”â€”Mat</h2>
<h3 id="çŸ¥è¯†ç‚¹-2">çŸ¥è¯†ç‚¹</h3>
<ul>
<li>C++ä¸­Matå¯¹è±¡ä¸èµ‹å€¼</li>
<li>Pythonä¸­çš„numpyå¯¹è±¡</li>
</ul>
<p>Matçš„åŸºæœ¬ç»“æ„ï¼šç”±å¤´éƒ¨ï¼ˆheaderï¼‰å’Œæ•°æ®éƒ¨åˆ†ï¼ˆData Blockï¼‰ç»„æˆã€‚å¤´éƒ¨åŒ…æ‹¬å±æ€§ï¼ˆå¤§å°ã€å®½é«˜ï¼‰ã€ç±»å‹ï¼ˆintï¼Œdoubleï¼‰ã€é€šé“æ•°ç­‰ã€‚æµ…æ‹·è´ï¼šèµ‹å€¼ï¼Œåªæ”¹å˜æŒ‡é’ˆï¼›æ·±æ‹·è´ï¼šå…‹éš†ã€æ‹·è´ã€‚</p>
<p>å…¶ä»–åŸºæœ¬å¯¹è±¡ç±»å‹ï¼š</p>
<ul>
<li>Vec
<ul>
<li>Vec&lt;double,19&gt; myVector;</li>
<li>typedef Vec&lt;uchar,2&gt; Vec2bï¼›</li>
<li>typedef Vec&lt;short,3&gt; Vec3s;</li>
<li>typedef Vec&lt;int,4&gt; Vec4i;</li>
<li>typedef Vec&lt;float,5&gt; Vec5f;</li>
<li>typedef Vec&lt;double,6&gt; Vec6d;</li>
</ul>
</li>
<li>Scalar
<ul>
<li>ä»Vecæ´¾ç”Ÿçš„æ¨¡æ¿ç±»ï¼Œåœ¨OpenCVä¸­å¹¿æ³›ç”¨äºä¼ é€’å’Œè¯»å–åƒç´ å€¼ã€‚</li>
<li>å¯ä»¥ç”¨[]è¿ç®—ç¬¦æ¥è®¿é—®Vecå’ŒScalarå€¼ï¼Œåˆå§‹åŒ–å¯ä»¥ç”¨ä¼ å€¼çš„æ–¹å¼é€šè¿‡è®¾ç½®å¦ä¸€ä¸ªæ ‡é‡ã€å‘é‡æˆ–å€¼æ¥å®Œæˆï¼Œå¦‚ï¼š</li>
<li><code>Scalar s0(0);</code>, <code>Scalar s1(0.0, 1.0, 2.0);</code>, <code>Scalar s2(s1);</code></li>
</ul>
</li>
<li>Point
<ul>
<li>typedef Point_<int> Point2i;</li>
<li>typedef Point2i Point;</li>
<li>typedef Point_<float> Point2f;</li>
<li>typedef Point_<double> Point2d;</li>
</ul>
</li>
<li>Size
<ul>
<li>ç”¨äºæŒ‡å®šå›¾åƒæˆ–çŸ©å½¢å¤§å°ã€‚è¿™ä¸ªç±»æ·»åŠ äº†ä¸¤ä¸ªæˆå‘˜widthå’Œheightï¼Œä»¥åŠæœ‰ç”¨çš„area()å‡½æ•°ã€‚</li>
<li>
<pre><code class="language-c++">   Size s(100, 100);
  Mat img = Mat::zeros(s, CV_8UC1);
  s.width = 200;
  int area = s.area(); // return 100Ã—200 
</code></pre>
</li>
</ul>
</li>
<li>Rect</li>
<li>RotatedRect</li>
</ul>
<h3 id="ç¤ºä¾‹ä»£ç -2">ç¤ºä¾‹ä»£ç </h3>
<p>Matçš„å¸¸è§æ“ä½œï¼š</p>
<pre><code class="language-c++">// åˆ›å»ºæ–¹æ³•ï¼šclone
Mat m1 = src.clone();

// å¤åˆ¶ï¼Œç­‰åŒäºclone
Mat m2;
src.copyTo(m2);

// èµ‹å€¼æ³•ï¼ŒæŒ‡å‘åŒä¸€ä¸ªæ•°æ®
Mat m3 = src;

// åˆ›å»ºç©ºç™½å›¾åƒ
Mat m4 = Mat::zeros(src.size(), src.type());
Mat m5 = Mat::zeros(Size(512,512), CV_8UC3);
Mat m6 = Mat::ones(Size(512,512), CV_8UC3);

Mat kernel = (Mat_&lt;char&gt;(3,3) &lt;&lt; 0, -1, 0,
	-1, 5, -1,
	0, -1, 0);
	
// è·å–åˆ—æ•°ã€è¡Œæ•°ã€é€šé“æ•°
std::cout &lt;&lt; &quot;Width:&quot; &lt;&lt; m3.cols &lt;&lt;  &quot; Height:&quot; &lt;&lt; m3.rows &lt;&lt; &quot; Channels:&quot; &lt;&lt; m3.channels() &lt;&lt; std::endl;
</code></pre>
<p>ç”±ä»£ç ä¾‹å­å±•å¼€ï¼Œè¯´æ˜ï¼š</p>
<ul>
<li>m1, m2éƒ½æ˜¯åŸæ•°æ®çš„æ·±æ‹·è´ï¼›m3ä¸ºæ–°å»ºçš„å›¾åƒæ•°æ®ã€‚</li>
<li>8UC1æŒ‡unsignedçš„å•é€šé“å›¾åƒï¼Œå¤§å°ä¸º8Ã—8ï¼›8UC3å¤§å°ä¸º8Ã—24ï¼Œæ¯ä¸‰ä¸ªè¿ç»­çš„ä¸ºä¸€ä¸ªåƒç´ ç‚¹ã€‚</li>
<li>è·å–è¡Œåˆ—é€šé“æ•°çš„æ–¹æ³•åŒºåˆ†ï¼Œè¡Œåˆ—ä¸ºå…ƒç´ ï¼Œé€šé“æ•°ä¸ºæ–¹æ³•ã€‚</li>
<li>Scalarä¸ºå‘é‡ï¼Ÿå¯ä»¥ç”¨æ¥å¯¹Matè¿›è¡Œä¿®æ”¹æ“ä½œã€‚</li>
<li>ç­‰å·è¿ç®—ç¬¦ä¸ºæµ…æ‹·è´ï¼Œåªæ”¹å˜æŒ‡é’ˆæŒ‡å‘ã€‚</li>
</ul>
<p>quickopencv.h:</p>
<pre><code class="language-c++">#pragma once
#include&lt;opencv2/opencv.hpp&gt;
using namespace cv;

class QuickDemo {
public:
	void colorSpace_Demo(Mat&amp; image);
	void mat_creation_demo(Mat&amp; image);
};
</code></pre>
<p>quickdemo.cpp:</p>
<pre><code class="language-c++">void QuickDemo::mat_creation_demo(Mat&amp; image) {
	Mat m1, m2;
	m1 = image.clone();
	image.copyTo(m2);

	// åˆ›å»ºç©ºç™½å›¾åƒ
	Mat m3 = Mat::zeros(Size(8, 8), CV_8UC1); // 8UC1, unsigned, channel oneå•é€šé“,output 8*8
	// if 8UC3, then output 8*24, 1-3 cols are for one singal pixel
	std::cout &lt;&lt; m3 &lt;&lt; std::endl;

	// è·å–åˆ—æ•°ã€è¡Œæ•°
	std::cout &lt;&lt; &quot;Width:&quot; &lt;&lt; m3.cols &lt;&lt;  &quot; Height:&quot; &lt;&lt; m3.rows &lt;&lt; &quot; Channels:&quot; &lt;&lt; m3.channels() &lt;&lt; std::endl;

	// å°†ä¸‰ä¸ªé€šé“éƒ½èµ‹å€¼ä¸º127
	m3 = Mat::zeros(Size(200, 200), CV_8UC3);
	m3 = Scalar(255, 0, 0); 
	// std::cout &lt;&lt; m3 &lt;&lt; std::endl;
	std::cout &lt;&lt; &quot;Width:&quot; &lt;&lt; m3.cols &lt;&lt; &quot; Height:&quot; &lt;&lt; m3.rows &lt;&lt; &quot; Channels:&quot; &lt;&lt; m3.channels() &lt;&lt; std::endl;
	imshow(&quot;m3&quot;, m3);

	// è¯æ˜ï¼šç­‰å·è¿ç®—ç¬¦åªæ˜¯æŒ‡é’ˆçš„æŒ‡å‘æ”¹å˜ï¼Œè€Œæ²¡æœ‰æ·±æ‹·è´ï¼›æ”¹å˜m4ä¹Ÿä¼šæ”¹å˜m3
	Mat m4 = m3;
	m4 = Scalar(0, 255, 0);
	imshow(&quot;m4&quot;, m3); // m3è¢«æ”¹å˜
}
</code></pre>
<p>main.cpp:</p>
<pre><code class="language-c++">#include&lt;opencv2/opencv.hpp&gt;
#include&lt;iostream&gt;
#include&quot;quickopencv.h&quot;
using namespace cv;
using namespace std;

int main(int artc, char** argv) {
	Mat src = imread(&quot;D:/sjtu/sjtu_files/4_1/opencv_learn/lena.jpg&quot;);
	if (src.empty()) {
		printf(&quot;Could not load image...\n&quot;);
		return -1;
	}

	QuickDemo qd;
	qd.mat_creation_demo(src);

	waitKey(0); // ms unit, 0 means wait
	return 0;
}
</code></pre>
<h2 id="opencvä¸­å›¾åƒåƒç´ -è¯»å†™-æ“ä½œ">OpenCVä¸­å›¾åƒåƒç´  è¯»å†™ æ“ä½œ</h2>
<h3 id="çŸ¥è¯†ç‚¹-3">çŸ¥è¯†ç‚¹</h3>
<ul>
<li>C++ä¸­åƒç´ çš„éå†ä¸è®¿é—®
<ul>
<li>æ•°ç»„éå†</li>
<li>æŒ‡é’ˆæ–¹å¼éå†</li>
</ul>
</li>
<li>Pythonä¸­åƒç´ çš„éå†ä¸è®¿é—®
<ul>
<li>æ•°ç»„éå†</li>
</ul>
</li>
<li>å¸¸è§çš„åƒç´ æ“ä½œ</li>
</ul>
<h3 id="ç¤ºä¾‹ä»£ç -3">ç¤ºä¾‹ä»£ç </h3>
<p>å¯¹å½©è‰²/ç°åº¦å›¾åƒè¿›è¡Œåè½¬å¤„ç†ã€‚</p>
<p>quickopencv.h</p>
<pre><code class="language-c++">#pragma once
#include&lt;opencv2/opencv.hpp&gt;
using namespace cv;

class QuickDemo {
public:
	void colorSpace_Demo(Mat&amp; image);
	void mat_creation_demo(Mat&amp; image);
	void pixel_visit_demo(Mat&amp; image); // 
};
</code></pre>
<p>quickdemo.cpp</p>
<pre><code class="language-c++">void QuickDemo::pixel_visit_demo(Mat&amp; image) {
	int w = image.cols;
	int h = image.rows;
	int dims = image.channels();
	for (int row = 0; row &lt; h; row++) {
		for (int col = 0; col &lt; w; col++) {
			if (dims == 1) { // å¯¹å•é€šé“çš„ç°åº¦å›¾
				int pv = image.at&lt;uchar&gt;(row, col);  // atè®¿é—®ucharï¼ˆå­—èŠ‚ç±»å‹ï¼‰ï¼Œè‡ªåŠ¨è½¬æ¢ä¸ºintç±»å‹

				// é‡æ–°èµ‹å€¼ï¼Œæ”¹å˜
				image.at&lt;uchar&gt;(row, col) = 255 - pv;
			}
			else if (dims == 3) { // å½©è‰²å›¾ï¼Œè·å¾—ä¸‰ä¸ªå€¼
				Vec3b bgr = image.at&lt;Vec3b&gt;(row, col);
				// int: Vec3i; float: Vec3f

				// èµ‹å€¼ï¼Œæ”¹å†™
				image.at&lt;Vec3b&gt;(row, col)[0] = 255 - bgr[0];
				image.at&lt;Vec3b&gt;(row, col)[1] = 255 - bgr[1];
				image.at&lt;Vec3b&gt;(row, col)[2] = 255 - bgr[2];
			}
		}
	}

	imshow(&quot;åƒç´ è¯»å†™æ¼”ç¤º&quot;, image);
}
</code></pre>
<p>main.cpp</p>
<pre><code class="language-c++">#include&lt;opencv2/opencv.hpp&gt;
#include&lt;iostream&gt;
#include&quot;quickopencv.h&quot;
using namespace cv;
using namespace std;

int main(int artc, char** argv) {
	Mat src = imread(&quot;D:/sjtu/sjtu_files/4_1/opencv_learn/lena.jpg&quot;); 
	if (src.empty()) {
		printf(&quot;Could not load image...\n&quot;);
		return -1;
	}

	imshow(&quot;Input window&quot;, src);

	QuickDemo qd;
	qd.pixel_visit_demo(src); // ************

	waitKey(0); // ms unit, 0 means wait
	return 0;
}
</code></pre>
<p>å¦‚ä½•ä½¿ç”¨æŒ‡é’ˆè®¿é—®åƒç´ ï¼Ÿ<br>
åœ¨quickdemo.cppä¸­ï¼š</p>
<pre><code class="language-c++">void QuickDemo::pixel_visit_demo(Mat&amp; image) {
	int w = image.cols;
	int h = image.rows;
	int dims = image.channels();
	
	// ç¼ºç‚¹ï¼šåˆ¤æ–­dimsåœ¨å¾ªç¯é‡Œé¢ï¼Œåº”è¯¥åœ¨æœ€å¤–å±‚åˆ¤æ–­ï¼Œèµ„æºæµªè´¹ä¸¥é‡
	// ä½¿ç”¨æŒ‡é’ˆ
	if (dims == 1) {
		for (int row = 0; row &lt; h; ++row) {
			uchar* current_pixel = image.ptr&lt;uchar&gt;(row);
			for (int col = 0; col &lt; w; ++col) {
				*current_pixel++ = 255 - *current_pixel;
			}
		}
	}
	else if (dims == 3) {
		for (int row = 0; row &lt; h; ++row) {
			uchar* current_pixel = image.ptr&lt;uchar&gt;(row);
			for (int col = 0; col &lt; w; ++col) {
				*current_pixel++ = 255 - *current_pixel;
				*current_pixel++ = 255 - *current_pixel;
				*current_pixel++ = 255 - *current_pixel;
			}
		}
	}

	imshow(&quot;åƒç´ è¯»å†™æ¼”ç¤º&quot;, image);
}
</code></pre>
<h2 id="å›¾åƒåƒç´ çš„-ç®—æœ¯-æ“ä½œ">å›¾åƒåƒç´ çš„ ç®—æœ¯ æ“ä½œ</h2>
<h3 id="çŸ¥è¯†ç‚¹-4">çŸ¥è¯†ç‚¹</h3>
<ul>
<li>åŠ addï¼Œå‡subtractï¼Œä¹˜multiplyï¼Œé™¤divide</li>
<li>saturate_cast</li>
</ul>
<h3 id="ç¤ºä¾‹ä»£ç -4">ç¤ºä¾‹ä»£ç </h3>
<p>main.cpp</p>
<pre><code class="language-c++">QuickDemo qd;
qd.operators_demo(src);
</code></pre>
<p>quickopencv.h</p>
<pre><code class="language-c++">#pragma once
#include&lt;opencv2/opencv.hpp&gt;
using namespace cv;

class QuickDemo {
public:
	void colorSpace_Demo(Mat&amp; image);
	void mat_creation_demo(Mat&amp; image);
	void pixel_visit_demo(Mat&amp; image);
	void operators_demo(Mat&amp; image);
};
</code></pre>
<p>quickdemo.cpp</p>
<pre><code class="language-c++">void QuickDemo::operators_demo(Mat&amp; image) {
	// åƒç´ æ“ä½œå¯ä»¥æ˜¯åŠ å‡ä¹˜é™¤ï¼Œæ³¨æ„æº¢å‡ºï¼
	Mat dst;

	// åŠ æ³•æ“ä½œï¼Œå˜äº®
	//dst = image + Scalar(50, 50, 50);
	add(image, Scalar(50, 50, 50), dst);
	imshow(&quot;åŠ æ³•æ“ä½œ&quot;, dst);

	// å‡æ³•æ“ä½œï¼Œå˜æš—
	//dst = image - Scalar(50, 50, 50);
	subtract(image, Scalar(50, 50, 50), dst);
	imshow(&quot;å‡æ³•æ“ä½œ&quot;, dst);

	// é™¤æ³•åŒç†å‡æ³•ï¼Œå˜æš—
	//dst = image / Scalar(2, 2, 2);
	divide(image, Scalar(2, 2, 2), dst);
	imshow(&quot;é™¤æ³•æ“ä½œ&quot;, dst);

	// ä¹˜æ³•åŒç†åŠ æ³•ï¼Œå˜äº®
	// ä¸“ç”¨ä¹˜æ³•å‡½æ•°
	Mat m = Mat::zeros(image.size(), image.type());
	m = Scalar(2, 2, 2);
	multiply(image, m, dst);
	imshow(&quot;ä¹˜æ³•æ“ä½œ&quot;, dst);

	// saturate_castï¼Œä¸Šé™åœ¨ucharèŒƒå›´å†…
	dst = Mat::zeros(image.size(), image.type()); // åˆå§‹åŒ–ï¼Œå¯ä»¥å¿½ç•¥
	m = Mat::zeros(image.size(), image.type());
	m = Scalar(2, 2, 2);
	int w = image.cols;
	int h = image.rows;
	int dims = image.channels();
	for (int row = 0; row &lt; h; ++row) {
		for (int col = 0; col &lt; w; ++col) {
			Vec3b lhs = image.at&lt;Vec3b&gt;(row, col);
			Vec3b rhs = image.at&lt;Vec3b&gt;(row, col);
			dst.at&lt;Vec3b&gt;(row, col)[0] = saturate_cast&lt;uchar&gt;(lhs[0] + rhs[0]);
			dst.at&lt;Vec3b&gt;(row, col)[1] = saturate_cast&lt;uchar&gt;(lhs[1] + rhs[1]);
			dst.at&lt;Vec3b&gt;(row, col)[2] = saturate_cast&lt;uchar&gt;(lhs[2] + rhs[2]);
		}
	}
	imshow(&quot;saturate castä¹˜æ³•&quot;, dst);
}
</code></pre>
<h2 id="åˆ©ç”¨guiç”Ÿæˆæ»šåŠ¨æ¡æ”¹å˜å›¾åƒäº®åº¦trackar">åˆ©ç”¨GUIç”Ÿæˆæ»šåŠ¨æ¡ï¼Œæ”¹å˜å›¾åƒäº®åº¦â€”â€”Trackar</h2>
<h3 id="çŸ¥è¯†ç‚¹-5">çŸ¥è¯†ç‚¹</h3>
<p>è¯¥éƒ¨åˆ†æ¶‰åŠå›è°ƒå‡½æ•°å†…å®¹ã€‚å‚è€ƒè¾ƒå¤šã€‚</p>
<p><code>createTrackbar()</code>å‡½æ•°çš„å‡½æ•°åŸå‹ä¸ºï¼š<br>
<code>CV_EXPORTS int createTrackbar(const String&amp; trackbarname, const String&amp; winnameï¼Œint* value, int count,TrackbarCallback onChange = 0, void* userdata = 0);</code></p>
<p>trackbarnameï¼šè¿™ä¸ªå‚æ•°ç”¨æ¥ç»™è¿™ä¸ªæ»šåŠ¨æ¡å–ä¸€ä¸ªåå­—ï¼›<br>
winnameï¼šè¿™ä¸ªå‚æ•°ç”¨æ¥æŒ‡å®šä½ è¦å§è¿™ä¸ªæ»šåŠ¨æ¡ç”¨åˆ°é‚£ä¸ªçª—å£ä¸Šï¼›<br>
valueï¼šè¿™ä¸ªå‚æ•°ç”¨æ¥è®¾ç½®æ»‘å—åˆå§‹å€¼ä½ç½®ï¼ŒåŒæ—¶è®°å½•æ»‘å—ä»¥åçš„ä½ç½®ï¼›<br>
countï¼šè¿™ä¸ªå‚æ•°ç”¨æ¥æŒ‡å®šæ»šåŠ¨æ¡å¯ä»¥æ»šåŠ¨çš„æœ€å¤§å€¼ï¼›<br>
onChangeï¼šè¿™ä¸ªå‚æ•°å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå‡½æ•°ç±»å‹çš„å˜é‡ï¼ˆå½“ç„¶è¿™æ ·è¯´æ„Ÿè§‰æœ‰ç‚¹æ€ªï¼‰ï¼Œç”¨æ¥æ¥æ”¶å›è°ƒå‡½æ•°å‡½æ•°åçš„ï¼Œé»˜è®¤å€¼ä¸º0ï¼›<br>
userdataï¼šè¿™ä¸ªå˜é‡è¿™ä¸ªå‚æ•°æ˜¯ç”¨æˆ·ä¼ ç»™å›è°ƒå‡½æ•°çš„æ•°æ®ï¼Œç”¨æ¥å¤„ç†è½¨è¿¹æ¡äº‹ä»¶ï¼Œé»˜è®¤å€¼ä¸º0ã€‚</p>
<p>è¿™é‡Œé¢ä¸€å…±æœ‰6ä¸ªå‚æ•°ï¼Œå…¶ä¸­<code>value</code>è¿™ä¸ªå‚æ•°å®¹æ˜“ç†è§£æœ‰åå·®ï¼Œ<code>onchange</code>ï¼Œ<code>userdata</code>è¿™ä¿©å‚æ•°å¯èƒ½éš¾ä»¥ç†è§£ï¼›</p>
<p>ä¸‹é¢å…ˆè¯´æˆ‘å¯¹<code>value</code>è¿™ä¸ªå‚æ•°çš„çœ‹æ³•ï¼š<br>
<code>value</code>è¿™ä¸ªå‚æ•°é¦–å…ˆè¦çŸ¥é“å®ƒæ˜¯ç”¨æ¥ç»™æ»‘å—ä½ç½®ä¸€ä¸ªåˆå§‹å€¼çš„ï¼Œä¹Ÿå°±æ˜¯å‘Šè¯‰æˆ‘ä»¬æ»‘å—æœ€åˆä½ç½®åœ¨å“ªï¼Œè€Œä¸æ˜¯æ»‘å—å¯ä»¥æ»‘åŠ¨èŒƒå›´çš„æœ€å°å€¼ï¼Œæ»‘å—å¯ä»¥æ»‘åŠ¨çš„èŒƒå›´æ°¸è¿œéƒ½æ˜¯[0, count]ï¼Œ<code>count</code>å³ä¸ºç¬¬å››ä¸ªå‚æ•°ï¼Œç„¶åè¿˜è¦ç†è§£ä¸€ä¸ªæ¦‚å¿µï¼Œä»£ç è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä¸æ˜¯<code>value</code>çš„å€¼å½±å“æ»‘å—çš„ä½ç½®ï¼Œè€Œæ˜¯ç”±äºç”¨æˆ·å¯¹æ»‘å—çš„ç§»åŠ¨æ”¹å˜äº†<code>value</code>çš„å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´<code>value</code>æ˜¯è¢«åŠ¨çš„ã€‚</p>
<p>ç„¶ååœ¨è¯´å¯¹<code>onChange</code>è¯¥å‚æ•°çš„ç†è§£ï¼š<br>
é¦–å…ˆæˆ‘ä»¬çœ‹ä¸€ä¸‹å›è°ƒå‡½æ•°çš„å‡½æ•°åŸå‹ï¼š<br>
<code>void (*TrackbarCallback)(int pos, void* userdata);</code><br>
å½“æˆ‘ä»¬æ²¡çœ‹å›è°ƒå‡½æ•°åŸå‹æ—¶å¯èƒ½å¾ˆéš¾ç†è§£æœ‰äº›ä»£ç ä¸­å®šä¹‰å›è°ƒå‡½æ•°æ—¶ä¸ºä»€ä¹ˆå¿…é¡»è¦æœ‰é‚£ä¿©å‚æ•°ï¼Œå½“çœ‹äº†å›è°ƒå‡½æ•°åŸå‹åæˆ‘ç›¸ä¿¡æœ‰C++åŸºç¡€çš„äººä¹Ÿéƒ½èƒ½æ˜ç™½äº†ï¼Œé‚£ä¹ˆæˆ‘æ¥è¯´è¯´å›è°ƒå‡½æ•°å’ŒcreateTrackbar()å‡½æ•°çš„å…³ç³»ï¼›é¦–å…ˆï¼Œæˆ‘ä»¬çœ‹åˆ°å›è°ƒå‡½æ•°å’ŒcreateTrackbarå‡½æ•°éƒ½æœ‰ä¸€ä¸ªå½¢å‚åä¸ºuserdataï¼Œé‚£è¿™æ˜¯ä¸æ˜¯å·§åˆå‘¢ï¼Ÿ<strong>ç­”æ¡ˆå½“ç„¶ä¸æ˜¯ï¼Œä½ å¯ä»¥è¿™æ ·ç†è§£ï¼Œå›è°ƒå‡½æ•°æ˜¯ä¸€ä¸ªå¿…é¡»ä¾æ‰˜äºcreateTrackbar()å‡½æ•°è€Œä½¿ç”¨çš„å‡½æ•°ï¼Œä»–ä¸èƒ½å•ç‹¬æ‹¿æ¥ä½¿ç”¨ï¼Œé‚£ä»–çš„ä¸¤ä¸ªå½¢å‚æ˜¯æ€ä¹ˆç”¨çš„å‘¢ï¼Ÿé¦–å…ˆç¬¬ä¸€ä¸ªå½¢å‚posï¼Œå®ƒè¡¨ç¤ºçš„æ˜¯å½“å‰æ»‘å—æ‰€åœ¨çš„ä½ç½®ï¼Œå®ƒçš„å€¼æ˜¯createTrackbar()ä¼ ç»™ä»–çš„ï¼Œä¹Ÿå°±æ˜¯createTrackbar()å½¢å‚valueçš„å€¼ï¼Œè¿™ä¸ªä¼ è¾“è¿‡ç¨‹æ˜¯åœ¨createTrackbar()å†…éƒ¨å®ç°çš„ï¼Œæ— éœ€æ·±ç©¶ï¼Œç„¶åå›è°ƒå‡½æ•°å½¢å‚userdataçš„å€¼å°±æ˜¯é€šè¿‡createTrackbar()çš„å½¢å‚userdataç›´æ¥å¾—åˆ°çš„ï¼Œæ‰€ä»¥createTrackbar()çš„å½¢å‚userdataå…¶å®å°±æ˜¯ä¸“é—¨ç»™å›è°ƒå‡½æ•°å‡†å¤‡çš„ã€‚</strong></p>
<h3 id="ç¤ºä¾‹ä»£ç -5">ç¤ºä¾‹ä»£ç </h3>
<p>main.cpp</p>
<pre><code class="language-c++">QuickDemo qd;
qd.tracking_bar_demo(src);
</code></pre>
<p>quickopencv.h</p>
<pre><code class="language-c++">class QuickDemo {
public:
	...
	void tracking_bar_demo(Mat&amp; image);
};
</code></pre>
<p>quickdemo.cpp</p>
<pre><code class="language-c++">// å®šä¹‰callbackå›è°ƒå‡½æ•°ï¼Œç”¨staticä¿®é¥°ï¼Œè¡¨ç¤ºè¯¥å‡½æ•°åªåœ¨åŒä¸€ä¸ªæ–‡ä»¶å†…è°ƒç”¨
// å…³äºå›è°ƒå‡½æ•°ï¼Œè¯¦è§https://www.zhihu.com/question/19801131; https://www.zhihu.com/question/19801131/answer/1641403537
// æœ¬æ®µä»£ç å‚è€ƒåšå®¢ï¼šhttps://www.cnblogs.com/geek-hao/p/11668248.html
static void onChangeTrackBar(int pos, void* userdata) {
	Mat src = *(Mat*)(userdata); // å¼ºåˆ¶ç±»å‹è½¬æ¢
	Mat dst, m = Mat::zeros(src.size(), src.type());
	m = Scalar(pos, pos, pos);
	add(src, m, dst);
	imshow(&quot;äº®åº¦è°ƒæ•´&quot;, dst);
}
void QuickDemo::tracking_bar_demo(Mat&amp; image){
	namedWindow(&quot;äº®åº¦è°ƒæ•´&quot;, WINDOW_AUTOSIZE);
	int max_value = 100;
	int lightness = 50;

	createTrackbar(&quot;Value Bar&quot;, &quot;äº®åº¦è°ƒæ•´&quot;, &amp;lightness, max_value, onChangeTrackBar, &amp;image);
}
</code></pre>
<h2 id="trackbarå‚æ•°ä¼ é€’ä¸è°ƒæ•´äº®åº¦ä¸å¯¹æ¯”åº¦">trackbarå‚æ•°ä¼ é€’ä¸è°ƒæ•´äº®åº¦ä¸å¯¹æ¯”åº¦</h2>
<!-- more -->
<p>ğŸ™ğŸ˜½</p>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://ray-sang.github.io/tag/aLOyylOMR/" class="tag">
                    OpenCV
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">ä¸‹ä¸€ç¯‡</div>
                <a href="https://ray-sang.github.io/post/ya-si-zhen-ti-he-xin-ci-hui-shu-1575-ci/">
                  <h3 class="post-title">
                    é›…æ€çœŸé¢˜æ ¸å¿ƒè¯æ±‡ä¹¦â€”â€”1575è¯
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>


  <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad()
  </script>





  </body>
</html>
